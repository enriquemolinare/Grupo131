\dt
DROP TABLE IF EXISTS payasos
\dt
DROP TABLE payasos
\dt
DROP TABLE IF EXISTS payasos;
DROP TABLE IF EXISTS CapitanesDROP TABLE IF EXISTS payasos;
DROP TABLE IF EXISTS payasos
\dt
DROP TABLE payasos
\dt
DROP TABLE 'payasos'
\dt
\dt
DROP TABLE payasos
\dt
\dt
create table Tiendas(tid int, direccion VARCHAR(150), PRIMARY KEY(tid)); 
\dt
creat table Productos(pdid int, nombre VARCHAR(150), precio float, descripcion VARCHAR (150), tipo VARCHAR(100), ancho float DEFAULT NULL, alto float DEFAULT NULL, largo float DEFAULT NULL, peso float DEFAULT NULL, fecha_de_expiracion date DEFAULT NULL, categoria VARCHAR(30) DEFAULT NULL, duracion_frio float DEFAULT NULL, metodo_conservacion VARCHAR(50) DEFAULT NULL);   
create table Productos(pdid int, nombre VARCHAR(150), precio float, descripcion VARCHAR (150), tipo VARCHAR(100), ancho float DEFAULT NULL, alto float DEFAULT NULL, largo float DEFAULT NULL, peso float DEFAULT NULL, fecha_de_expiracion date DEFAULT NULL, categoria VARCHAR(30) DEFAULT NULL, duracion_frio float DEFAULT NULL, metodo_conservacion VARCHAR(50) DEFAULT NULL);   
\dt
select * from usuariosselect * from usuariosselect * from usuarios;
select * from usuarios;
select * from tiendas;
select * from despacho_tiendas;
ALTER TABLE Skills DELETE PRIMARY KEYALTER TABLE Skills ADD PRIMARY KEY ( SkillID, SkillName );
ALTER TABLE tiendas DELETE PRIMARY KEYALTER TABLE tiendas ADD PRIMARY KEY ( tid );
alter table tienda add primary key (tid);
alter table tiendas add primary key (tid);
select * productos;
select * from producto;
select * from productos;
select * from tiendas;
alter table productos drop column duracion_frio;
alter table productos add column duracion_ambiente;
alter table productos add column duracion_ambiente;
psqlalter table productos add column duracion_ambiente;
select * from productos;
\dt
select * from compras;
\dt
SELECT * FROM compras;
SELECT * FROM tiendas;
SELECT * FROM personal;
SELECT * FROM productos_por_compra;
SELECT p1.nombre FROM (SELECT p.nombre, count(tipo) as total_comestibles FROM (SELECT tiendas.nombre, productos_tienda.pdid, productos.tipo FROM tiendas, productos_tienda, productos WHERE productos_tienda.pdid = productos.pdid AND tiendas.tid = productos_tienda.tid AND productos.tipo = 'comestible') as p GROUP BY nombre) as p1, (SELECT p.nombre, count(tipo) as total_comestibles FROM (SELECT tiendas.nombre, productos_tienda.pdid, productos.tipo FROM tiendas, productos_tienda, productos WHERE productos_tienda.pdid = productos.pdid AND tiendas.tid = productos_tienda.tid AND productos.tipo = 'comestible') as p GROUP BY nombre) as p2 WHERE p1.total_comestibles < p2.total_comestibles;
SELECT p1.nombre FROM (SELECT p.nombre, count(tipo) as total_comestibles FROM (SELECT tiendas.nombre, productos_tienda.pdid, productos.tipo FROM tiendas, productos_tienda, productos WHERE productos_tienda.pdid = productos.pdid AND tiendas.tid = productos_tienda.tid AND productos.tipo = 'comestible') as p GROUP BY nombre) as p1, (SELECT p.nombre, count(tipo) as total_comestibles FROM (SELECT tiendas.nombre, productos_tienda.pdid, productos.tipo FROM tiendas, productos_tienda, productos WHERE productos_tienda.pdid = productos.pdid AND tiendas.tid = productos_tienda.tid AND productos.tipo = 'comestible') as p GROUP BY nombre) as p2 WHERE p1.total_comestibles < p2.total_comestibles;
SELECT p.nombre, count(tipo) as total_comestibles FROM (SELECT tiendas.nombre, productos_tienda.pdid, productos.tipo FROM tiendas, productos_tienda, productos WHERE productos_tienda.pdid = productos.pdid AND tiendas.tid = productos_tienda.tid AND productos.tipo = 'comestible') as p GROUP BY nombre;
SELECT p.nombre FROM (SELECT tiendas.nombre, productos_tienda.pdid, productos.tipo FROM tiendas, productos_tienda, productos WHERE productos_tienda.pdid = productos.pdid AND tiendas.tid = productos_tienda.tid AND productos.tipo = 'comestible') as p;
SELECT p.nombre FROM (SELECT tiendas.nombre, productos_tienda.pdid, productos.tipo FROM tiendas, productos_tienda, productos WHERE productos_tienda.pdid = productos.pdid AND tiendas.tid = productos_tienda.tid AND productos.tipo = 'comestible') as p GROUP BY nombre;
 SELECT p3.nombre FROM (SELECT p.nombre FROM (SELECT tiendas.nombre WHERE produtos_tienda)) as p3 WHERE p3.nombre NOT IN (SELECT p1.nombre FROM (SELECT p.nombre, count(tipo) as total_comestibles FROM (SELECT tiendas.nombre, productos_tienda.pdid, productos.tipo FROM tiendas, productos_tienda, productos WHERE productos_tienda.pdid = productos.pdid AND tiendas.tid = productos_tienda.tid AND productos.tipo = 'comestible') as p GROUP BY nombre) as p1, (SELECT p.nombre, count(tipo) as total_comestibles FROM (SELECT tiendas.nombre, productos_tienda.pdid, productos.tipo FROM tiendas, productos_tienda, productos WHERE productos_tienda.pdid = productos.pdid AND tiendas.tid = productos_tienda.tid AND productos.tipo = 'comestible') as p GROUP BY nombre) as p2 WHERE p1.total_comestibles < p2.total_comestibles)SELECT p.nombre FROM (SELECT tiendas.nombre, productos_tienda.pdid, productos.tipo FROM tiendas, productos_tienda, productos WHERE productos_tienda.pdid = productos.pdid AND tiendas.tid = productos_tienda.tid AND productos.tipo = 'comestible') as p GROUP BY nombre;
SELECT p.nombre FROM (SELECT tiendas.nombre, productos_tienda.pdid, productos.tipo FROM tiendas, productos_tienda, productos WHERE productos_tienda.pdid = productos.pdid AND tiendas.tid = productos_tienda.tid AND productos.tipo = 'comestible') as p GROUP BY nombre;
SELECT p.nombre FROM (SELECT tiendas.nombre, productos_tienda.pdid, productos.tipo FROM tiendas, productos_tienda, productos WHERE productos_tienda.pdid = productos.pdid AND tiendas.tid = productos_tienda.tid AND productos.tipo = 'comestible') as p GROUP BY nombre;
SELECT tiendas.nombre, productos_tienda.pdid, productos.tipo FROM tiendas, productos_tienda, productos WHERE productos_tienda.pdid = productos.pdid AND tiendas.tid = productos_tienda.tid AND productos.tipo = 'comestible') as p GROUP BY nombre;
SELECT tiendas.nombre, productos_tienda.pdid, productos.tipo FROM tiendas, productos_tienda, productos WHERE productos_tienda.pdid = productos.pdid AND tiendas.tid = productos_tienda.tid AND productos.tipo = 'comestible' GROUP BY nombre;
SELECT tiendas.nombre, productos_tienda.pdid, productos.tipo FROM tiendas, productos_tienda, productos WHERE productos_tienda.pdid = productos.pdid AND tiendas.tid = productos_tienda.tid AND productos.tipo = 'comestible' GROUP BY tiendas.nombre;
SELECT p.nombre FROM (SELECT tiendas.nombre, productos_tienda.pdid, productos.tipo FROM tiendas, productos_tienda, productos WHERE productos_tienda.pdid = productos.pdid AND tiendas.tid = productos_tienda.tid AND productos.tipo = 'comestible') as p GROUP BY nombre;
dt?de//dt
\dt
select * from tiendas;
select * from tiendas;
exit
\q
\c grupo131e2
;
\ld
\dt
create table usuarios(id int, nombre varchar(150), rut varchar(150),edad int, sexo varchar(20), primary key (id));
\COPY usuarios FROM ‘”Entrega_2”/usuarios.csv’ DELIMITER ‘,’ CSV HEADER;
\COPY usuarios FROM ‘”Entrega 2”/usuarios.csv’ DELIMITER ‘,’ CSV HEADER;
\c grupo131e2
\COPY usuarios FROM ‘Entrega 2/usuarios.csv’ DELIMITER ‘,’ CSV HEADER;
qq;
exitexit;
\q
\c grupo131e2
COPY usuarios FROM ‘csv/usuarios.csv’ DELIMITER ‘,’ CSV HEADER;
\
\COPY usuarios FROM ‘csv/usuarios.csv’ DELIMITER ‘,’ CSV HEADER;
\COPY usuarios FROM ‘csv/usuarios.csv’ DELIMITER ‘,’ CSV HEADER;
\q
\c grupo131e2
\COPY usuarios FROM ‘usuarios.csv’ DELIMITER ‘,’ CSV HEADER;
\! pwv
\! pwd
\COPY usuarios FROM ‘csv/usuarios.csv’ DELIMITER ‘,’ CSV HEADER;
\COPY usuarios FROM ‘csv/usuarios.csv’ DELIMITER ‘,’ CSV HEADER;
\dt
\! pwd
\ld
\ls
ls;
\ls;
\q
\c grupo131e2
\COPY cobertura_tiendas FROM ‘csv/usuarios.csv’ DELIMITER ‘,’ CSV HEADER;
\dt
select * from usuarios;
\c grupo131e2
\dt
SELECT * FROM frescos;
\q
\c grupo131e2
/dt
\dt
\q
\c grupo131e2
\dt
\COPY cobertura_tiendas FROM ‘csv/cobertura_tiendas.csv’ DELIMITER ‘,’ CSV HEADER;
\COPY cobertura_tiendas FROM ‘csv/cobertura_tiendas.csv’ DELIMITER ',' CSV HEADER;
\COPY cobertura_tiendas FROM ‘csv/cobertura_tiendas.csv’ DELIMITER ‘,’ CSV HEADER;
\! pwd
\q
\c grupo131e2
\dt
select * from productos_tienda;
select * from cobertura_tiendas;
select * from congelados;
\COPY congelados FROM csv/congelados.csv DELIMITER ',' CSV HEADER;
set datestyle = ymd;
\COPY congelados FROM csv/congelados.csv DELIMITER ',' CSV HEADER;
\COPY frescos FROM csv/frescos.csv DELIMITER ',' CSV HEADER;
\COPY conservas FROM csv/conservas.csv DELIMITER ',' CSV HEADER;
\dt
select * from compras;
select * from comunas;
select * from congelados;
select * from conservas;
select * from frescos;
\dt
select * from direcciones;
select * from direcciones_usuarios;
select * from direcciones;
select * from jefe_tiendas;
select * from no_comestibles;
select * from personal;
select * form producto_por_compra;
select * from producto_por_compra;
select * from productos;
select * from productos_tienda;
select * from tiendas;
select * form usuarios;
select * from usuarios;
\q
\c grupo131e2
select tiendas.id as tienda_id, tiendas.nombre as nombre_tienda, personal.id, personal.nombre, personal.edad from tiendas, personal where tiendas.id = personal.tienda_id; 
select tiendas.id as tienda_id, tiendas.nombre as nombre_tienda, comunas.comuna, personal.id, personal.nombre, personal.edad from tiendas, direcciones_tiendas, direcciones, comunas, personal where tiendas.id = personal.tienda_id and tiendas
\dt
\q
\c grupo131e2
select tiendas.id as tienda_id, tiendas.nombre as nombre_tienda, comunas.comuna, personal.id, personal.nombre, personal.edad from tiendas, direcciones_tiendas, direcciones, comunas, personal where tiendas.id = personal.tienda_id and tiendas;
select tiendas.id as tienda_id, tiendas.nombre as nombre_tienda, comunas.comuna, personal.id, personal.nombre, personal.edad from tiendas, direcciones_tiendas, direcciones, comunas, personal where tiendas.id = personal.tienda_id and tiendas;
select tiendas.id as tienda_id, tiendas.nombre as nombre_tienda, personal.id, personal.nombre, personal.edad from tiendas, personal where tiendas.id = personal.tienda_id; 
select tiendas.id as tienda_id, tiendas.nombre as nombre_tienda, personal.id, personal.nombre, personal.edad, AVG(personal.edad) from tiendas, personal where tiendas.id = personal.tienda_id; 
select tiendas.id as tienda_id, tiendas.nombre as nombre_tienda, personal.id, personal.nombre, personal.edad, AVG(personal.edad) as promedio_edad_personal from tiendas, personal where tiendas.id = personal.tienda_id; 
select AVG(personal.edad) FROM personal;
select AVG(personal.edad) FROM tiendas, direcciones_tiendas, direcciones, comunas, personal WHERE tiendas.direccion_id = direcciones.id AND direcciones.comuna_id = comunas.id AND personal.tienda_id = tiendas.id AND comunas.comuna = [INPUT];
select AVG(personal.edad) FROM tiendas, direcciones_tiendas, direcciones, comunas, personal WHERE tiendas.direccion_id = direcciones.id AND direcciones.comuna_id = comunas.id AND personal.tienda_id = tiendas.id AND comunas.comuna = [INPUT];
CREATE TABLE   direcciones_tiendas(tienda_id int, direccion_id int, primary key (tienda_id, direccion_id), FOREIGN KEY (tienda_id) REFERENCES tiendas (id), FOREIGN KEY (direccion_id) REFERENCES direcciones (id));
\c grupo131e2
\dn
\du
\dt
ls
\! pwd
\c grupo131e2
\dt
\du
